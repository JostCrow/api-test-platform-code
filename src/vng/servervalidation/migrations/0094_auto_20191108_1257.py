# Generated by Django 2.2.4 on 2019-11-08 11:57

from django.db import migrations
from filer.models import File


def migrate_postmantest_validation_files(apps, schema_editor):
    PostmanTest = apps.get_model('servervalidation', 'PostmanTest')
    for postmantest in PostmanTest.objects.all():
        validation_file = postmantest._validation_file.file

        # To ensure that the name of the file is no longer than 100 characters
        validation_file.name = validation_file.name.split('/')[-1][:100]
        postmantest.validation_file = validation_file
        postmantest.save()

class Migration(migrations.Migration):

    dependencies = [
        ('servervalidation', '0093_auto_20191108_1255'),
    ]

    operations = [
        migrations.RunPython(migrate_postmantest_validation_files, migrations.RunPython.noop)
    ]
